var ScrollSpy=function(){function e(a){this.mode=a.mode?a.mode:"vertical";this.buffer=a.buffer?a.buffer:0;this.container=a.container?a.container:window;this.onEnter=a.onEnter?a.onEnter:null;this.onLeave=a.onLeave?a.onLeave:null;this.onTick=a.onTick?a.onTick:null;this.events=[]}e.prototype.spy=function(a,c){var b=this,h=0,k=0,g=!1;this.events.push({element:a,handler:function(f){f={top:b.container instanceof Window?b.container.pageYOffset:b.container.scrollTop,left:b.container instanceof Window?b.container.pageXOffset:
b.container.scrollTop};var d="vertical"===b.mode?f.top+b.buffer:f.left+b.buffer,e=c.min,l;l=0===c.max?b.container instanceof Window?"vertical"===b.mode?b.container.innerWidth:b.container.outerWidth+a.offsetWidth:"vertical"===b.mode?b.container.clientHeight:b.container.offsetWidth+a.offsetWidth:c.max;if(d>=e&&d<=l){if(!g&&(g=!0,h++,d=document.createEvent("Event"),d.initEvent("scrollEnter",!1,!0),d.position=f,a.dispatchEvent(d),b.onEnter))b.onEnter(a,f);d=document.createEvent("Event");d.initEvent("scrollTick",
!1,!0);d.position=f;d.tickData={inside:g,enters:h,leaves:k};a.dispatchEvent(d);if(b.onTick)b.onTick(a,f,g,h,k)}else if(g=!1,k++,d=document.createEvent("Event"),d.initEvent("scrollLeave",!1,!0),d.position=f,a.dispatchEvent(d),b.onLeave)b.onLeave(a,f)}});this.container.addEventListener("scroll",this.events[this.events.length-1].handler)};e.prototype.unspy=function(a,c){var b=this,e=!1;this.events.forEach(function(c){c.element===a&&(b.container.removeEventListener("scroll",c.handler),e=!0,c=b.events.indexOf(c),
0<c&&b.events.splice(c,1))});if(e)return!0;if(c)return!1;throw Error("ScrollSpy are not spying on the element "+a);};e.prototype.unspyAll=function(){var a=this;this.events.forEach(function(c){a.container.removeEventListener("scroll",c.handler);c=a.events.indexOf(c);0<c&&a.events.splice(c,1)})};return e}();
